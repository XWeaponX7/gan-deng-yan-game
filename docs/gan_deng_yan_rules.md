# 干瞪眼游戏规则说明

## 游戏基本信息

**游戏人数**：2-6人（本版本支持2人对战）
**使用牌具**：标准54张扑克牌（包含大小王）
**游戏目标**：第一个打光手中所有牌的玩家获胜

## 牌型大小顺序

### 单张牌大小（从小到大）
```
3 < 4 < 5 < 6 < 7 < 8 < 9 < 10 < J < Q < K < A < 2 < 小王 < 大王
```

**重要说明**：
- **2是最大的数字牌**，比A还大
- **小王和大王是最大的单张牌**
- 花色不影响大小比较

## 牌型分类

### 1. 单张
- **定义**：任何一张牌
- **大小比较**：按上述单张牌顺序
- **示例**：`3♠` < `K♥` < `A♣` < `2♦` < `小王` < `大王`

### 2. 对子
- **定义**：两张点数相同的牌
- **大小比较**：按点数大小，花色无关
- **示例**：`5♠5♥` < `Q♣Q♦` < `A♠A♥` < `2♣2♠`

### 3. 顺子
- **定义**：至少3张点数连续的牌
- **特殊规则**：
  - A可以接在K后面：`...Q-K-A`
  - **数字2不能出现在顺子中**（仍然保持）
  - **大小王百搭**：可以替代任意牌组成顺子
    - `3-4-大王` = `3-4-5` 顺子
    - `小王-8-9` = `7-8-9` 顺子
    - `J-Q-小王` = `J-Q-K` 顺子
- **大小比较**：按实际构成的顺子数值比较
- **示例**：
  - `3-4-5` < `7-8-9-10` < `J-Q-K-A`
  - `3-4-大王`（等同于3-4-5） < `6-7-小王-9`（等同于6-7-8-9）

### 4. 炸弹

#### 4.1 普通炸弹
- **三张炸弹**：三张点数相同的牌（如 `4♠4♥4♣`）
- **四张炸弹**：四张点数相同的牌（如 `K♠K♥K♣K♦`）
- **大小比较**：按点数大小
- **示例**：`333` < `QQQ` < `AAA` < `222` < `KKKK`

#### 4.2 王炸
- **定义**：大王+小王的组合
- **特点**：游戏中最强的牌型，可以压制任何牌

### 炸弹压制规则
- **三张炸弹**：可以压制单张、对子、顺子、更小的三张炸弹
- **四张炸弹**：可以压制所有三张炸弹和更小的四张炸弹
- **王炸**：可以压制任何牌型，包括所有普通炸弹

## 游戏流程

### 1. 游戏准备
1. **洗牌发牌**：将54张牌洗匀，每个玩家先发5张牌，第一个出牌的玩家额外获得1张牌（共6张）
2. **确定首出**：随机决定第一局的起始玩家（该玩家手牌6张，其他玩家5张）
3. **剩余牌堆**：剩余的牌作为摸牌堆备用

### 2. 出牌规则

#### 2.1 首出规则
- 拥有出牌权的玩家可以**任意出**一种合法牌型
- 没有任何限制，可以选择单张、对子、顺子或炸弹

#### 2.2 跟牌规则
- **必须出相同牌型**：上家出什么类型，下家必须出同类型
- **必须更大**：出的牌必须比上家的牌大
- **炸弹例外**：任何时候都可以用炸弹压制

#### 2.3 过牌规则
- 如果无法或不愿意出更大的同类型牌，必须**"过"**
- 过牌后轮到下一家出牌

#### 2.4 重新获得出牌权
- 当一轮中所有其他玩家都"过"时，最后出牌的玩家获得新的出牌权
- **摸牌规则**：获得新出牌权的玩家必须先从牌堆摸一张牌，然后才能出牌
- 获得出牌权后，可以**任意出**新的牌型

## 特殊牌规则

### 1. 数字2的特殊性
- **单张2是最大的数字牌**，仅次于大小王
- **不能用于顺子**
- 出单张2后，对手只能出小王、大王或炸弹

### 2. 大小王的特殊性
- **单出时是最大的单张牌**
- **组合时构成王炸**（最强牌型）
- **百搭功能**：可以替代任意牌参与组牌
  - 大王 + 7 + 7 = 三张7的炸弹
  - 小王 + A + A = 三张A的炸弹  
  - 大王 + 小王 + 9 + 9 = 四张9的炸弹
  - 3 + 4 + 大王 = 3-4-5 顺子（大王替代5）
- **百搭限制**：
  - 王炸优先：大王+小王优先识别为王炸
  - 百搭顺子：大小王可以在顺子中替代任意牌（更新规则）
- 大王 > 小王（单张比较时）

## 游戏示例

### 示例1：基础出牌
```
玩家A出：5♠（单张5）
玩家B可以出：6♥, 7♣, ..., K♦, A♠, 2♥, 小王, 大王 或任何炸弹
玩家B选择出：J♣（单张J）

玩家A可以出：Q♠, K♥, A♣, 2♦, 小王, 大王 或任何炸弹
玩家A选择：过

玩家B获得出牌权，可以任意出新牌型
```

### 示例2：对子出牌
```
玩家A出：8♠8♥（对子8）
玩家B可以出：99, 1010, JJ, QQ, KK, AA, 22 或任何炸弹
玩家B选择出：K♣K♦（对子K）

玩家A可以出：AA, 22 或任何炸弹
玩家A选择出：A♠A♥（对子A）

玩家B可以出：22 或任何炸弹
玩家B选择：过

玩家A获得出牌权
```

### 示例3：炸弹使用
```
玩家A出：Q♠Q♥Q♣（三张Q）
玩家B选择出：K♠K♥K♣（三张K，压制三张Q）

玩家A选择出：大王+小王（王炸，压制所有牌）
玩家B：过

玩家A获得出牌权，可以任意出新牌型
```

### 示例4：顺子出牌
```
玩家A出：3♠4♥5♣（三张顺子）
玩家B可以出：4-5-6, 5-6-7, ..., J-Q-K-A 或任何炸弹
玩家B选择出：7♦8♠9♥（三张顺子，起始点更高）

玩家A可以出：8-9-10, 9-10-J, 10-J-Q, J-Q-K, Q-K-A 或任何炸弹
```

## 胜负判定

### 单局胜负
- **获胜条件**：第一个打光手中所有牌的玩家获胜
- **失败条件**：手中还有牌时，对手已经全部出完

### 计分规则（可选实现）
- **获胜玩家**：得0分或加分
- **失败玩家**：按剩余牌数扣分（剩几张扣几分）
- **多局游戏**：累计分数，最低分者总胜利

## 边界情况处理

### 1. 最后一张牌
- 玩家出完最后一张牌即获胜
- 最后一张牌可以是任意合法牌型

### 2. 同时出完牌
- 理论上不存在，因为是轮流出牌
- 如果发生，按出牌顺序判定

### 3. 无人能接牌
- 所有人都过牌时，最后出牌者获得出牌权
- 重新开始新一轮出牌

## 策略提示

### 基础策略
1. **保留炸弹**：关键时刻使用炸弹夺回主动权
2. **记忆已出牌**：判断对手可能的牌型
3. **控制节奏**：适时过牌，避免被动跟牌

### 高级策略
1. **牌型配合**：合理组合不同牌型
2. **时机把握**：选择最佳时机出大牌
3. **心理博弈**：观察对手出牌习惯

## 版本更新规则

### MVP版本实现范围
- ✅ 单张牌型
- ✅ 对子牌型
- ✅ 基础大小比较
- ❌ 暂不支持：顺子、炸弹、特殊牌规则

### 完整版本新增
- ✅ 顺子牌型识别和比较
- ✅ 三张、四张炸弹
- ✅ 王炸特殊处理
- ✅ 数字2和大小王的特殊规则（v2.1实现）
- ✅ 完整的压制逻辑

### v2.1 特殊牌规则实现
- ✅ 数字2单张特殊压制：只能被小王、大王或炸弹压制
- ✅ 大小王单张最强：大王 > 小王 > 2 > A
- ✅ 顺子限制：确保2无法参与顺子
- ✅ 王炸组合：大王+小王自动识别为王炸

### v2.2 百搭功能实现
- ✅ 大小王百搭：可替代任意牌组成炸弹
- ✅ 百搭顺子：大小王可在顺子中替代任意牌  
- ✅ 智能识别：验证用户选择的百搭组合是否有效
- ✅ 王炸优先：大王+小王优先识别为王炸
- ✅ 百搭提示：显示百搭牌的组合信息

---

**注意**：以上规则为标准干瞪眼玩法，在具体实现中可能会根据技术限制或用户反馈进行微调。任何规则变更都应该在此文档中及时更新。